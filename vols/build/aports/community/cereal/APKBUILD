# Contributor: Adam Jensen <adam@acj.sh>
# Maintainer: Adam Jensen <adam@acj.sh>
pkgname=cereal
pkgver=1.3.2
pkgrel=2
pkgdesc="A header-only C++11 library for serialization"
url="https://github.com/USCiLab/cereal"
arch="noarch"
license="BSD-3-Clause"
makedepends="boost-dev cmake doxygen"
source="$pkgname-$pkgver.tar.gz::https://github.com/USCiLab/cereal/archive/v$pkgver.tar.gz"

build() {
	cmake -B build \
		-DCMAKE_INSTALL_PREFIX="/usr" \
		-DSKIP_PORTABILITY_TEST=ON \
		-DCMAKE_CXX_STANDARD=17
	make -C build
}

check() {
	cd build
	CTEST_OUTPUT_ON_FAILURE=TRUE ctest
}

package() {
	make -C build DESTDIR="$pkgdir" install
}

sha512sums="
98d306d6292789129675f1c5c5aedcb90cfcc1029c4482893a8f9b23f3c9755e5ed4762d7a528f215345cae6392e87cd8d89467115b6f031b41c8673d6b4b109  cereal-1.3.2.tar.gz
"
