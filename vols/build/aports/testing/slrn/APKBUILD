# Maintainer: Steffen Lange <steffen@stelas.de>
pkgname=slrn
pkgver=1.0.3
pkgrel=6
pkgdesc="An open source text-based news client"
url="https://slrn.info/"
arch="all"
license="GPL-2.0-or-later"
makedepends="openssl-dev slang-dev ncurses-dev"
subpackages="$pkgname-doc"
source="http://jedsoft.org/releases/slrn/slrn-${pkgver}a.tar.bz2
	terminfo.patch"

prepare() {
	default_prepare
	update_config_guess
	update_config_sub
}

build() {
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		--sysconfdir=/etc \
		--enable-setgid-code \
		--with-slrnpull \
		--with-ssl \
		--enable-spoilers
	make
}

package() {
	make -j1 DESTDIR="$pkgdir" install
	install -Dm644 doc/slrn.rc "$pkgdir"/etc/slrnrc
}

sha512sums="11cef2dfe41f441af15acc22fb675cf607e932f0dd6d4a998e51ecda05c9a50d7abf10a3e693ffc857ad77e09634f460404e4d5b289169e7bbffdaf5d6d565a3  slrn-1.0.3a.tar.bz2
2a1ec6e07bbf025047ad398c64f3ecab2652558d480140ad7d0223d0813690f7f8a40d76d1664c2fec33cb0534619d1caa3a7328e89f806db8d12eb68aaf58e3  terminfo.patch"
